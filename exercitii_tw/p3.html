<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>P3</title>
    </head>
    
    <body>
        <input type="text" id="numar">
        <p>examen la tehnici web</p>
        <p>in localStorage iar la urmatoarea </p>
        <p>v care primesc stilizarea unei clase patrat</p>
        <p>schimba lent timp de 3 secund</p>
        <p>etichete nume de culori si un buto</p>

        <p>Scrieti cod</p>
        <p>Daca se da click in fereastra</p>
        <p>fereastra</p>
        <p>ales aleator intre 5 si 10</p>
        <p>Scrieti cod JavaScript pentru a rezolva urmatoarel</p>
    </body>

    <script>
        nrPara = 10;
        if (localStorage.getItem("cntDelete") != "") {
            let input = document.getElementById("numar");
            input.value = localStorage.getItem("cntDelete");
        }
        
        document.addEventListener ("keydown", function(event) {
            if(event.key == "s") {
                
                let input = document.getElementById("numar");
                let inputNum = input.value;
                let contorDeleted = 0;
                let paragraphs = Array.from(document.getElementsByTagName("p"));
                function removeChild (index) {
                    
                    if (index == paragraphs.length) {
                        console.log(contorDeleted);
                        localStorage.setItem("cntDelete", contorDeleted);
                        return;
                    }
                    text = paragraphs[index].innerText;
                    countWords = text.trim().split(/\s+/).length;

                    if (countWords > inputNum) {
                        paragraphs[index].parentNode.removeChild(paragraphs[index]);
                        contorDeleted ++;
                    }
                    
                    setTimeout(() => removeChild(index + 1), 1000);
                }

                removeChild(0);
            }
        })
    </script>
</html>